# 文件上传功能实现计划

## 功能需求
1. 文件上传功能，支持选择文件和文件夹
2. 点击上传按钮时再进行上传操作
3. 上传列表展示所有文件（图标、文件名、上传进度、状态）
4. 若某个文件上传失败，显示重试按钮
5. 所有组件尽可能使用 shadcn/ui，杜绝自行实现常见组件

## 技术实现

### 1. 安装必要的 shadcn/ui 组件
- 需要安装 `progress` 组件用于显示上传进度

### 2. 组件结构设计
- **UploadFile** 组件：主组件，使用 Sheet 实现右侧抽屉
  - 文件选择区域：支持拖拽和点击选择文件/文件夹
  - 上传列表区域：展示待上传文件列表
  - 操作按钮区域：取消、继续上传按钮

### 3. 状态管理
- `files` 状态：存储待上传文件列表
- `uploading` 状态：标识是否正在上传
- `uploadProgress` 状态：存储每个文件的上传进度

### 4. 核心功能实现
- **文件选择**：使用原生 input[type="file"] 支持文件和文件夹选择
- **文件预览**：使用现有的 getFileIcon 函数获取文件图标
- **上传逻辑**：模拟上传过程，更新上传进度
- **错误处理**：模拟上传失败，显示重试按钮
- **进度显示**：使用 progress 组件显示上传进度

### 5. 样式设计
- 使用 Tailwind CSS 实现响应式布局
- 保持与现有项目设计风格一致

### 6. 代码结构
```typescript
// upload-file.tsx 主要结构
function UploadFile() {
  // 状态管理
  // 文件选择处理
  // 上传处理
  // 重试处理
  
  return (
    <Sheet>
      {/* 文件选择区域 */}
      {/* 上传列表 */}
      {/* 操作按钮 */}
    </Sheet>
  );
}
```

### 7. 实现步骤
1. 安装 progress 组件
2. 修改 upload-file.tsx 组件，实现文件选择功能
3. 实现上传列表展示
4. 实现上传逻辑和进度显示
5. 实现错误处理和重试功能
6. 测试功能完整性

## 预期效果
- 点击上传按钮打开右侧抽屉
- 支持拖拽和点击选择文件/文件夹
- 显示待上传文件列表，包含文件图标、文件名
- 点击继续上传后开始上传，显示上传进度
- 上传失败的文件显示重试按钮
- 上传完成后自动关闭抽屉或显示成功提示